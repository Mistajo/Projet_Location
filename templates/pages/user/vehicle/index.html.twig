{% extends 'themes/base_user.html.twig' %}

{% block title %}
	- User - Nos Vehicules
{% endblock %}

{% block main %}
	<main>
		<h1 class="text-center my-3 display-5">Nos Vehicules</h1>
		<div class="container mt-3">
			<div class="row text-center">
				<div class="dropdown-center text-center my-5">
					<button class="btn btn-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
						-- Selectioner une Agence --
					</button>
					<ul class="dropdown-menu">
						{% if agencies is empty %}
							<li>
								<a class="dropdown-item" href="#">Aucune Agence</a>
							</li>
						{% else %}
							{% for agency in agencies %}
								{% if agency.getAvailableVehicles is not empty %}
									<li>
										<a class="dropdown-item" href="{{path('user.vehicles.filter_by_agency',{'id': agency.id})}}">{{agency.name}}
											({{agency.getAvailableVehicles|length}})</a>
									</li>
								{% endif %}
							{% endfor %}
						{% endif %}
					</ul>
				</div>

				{% if vehicles is empty %}
					<p class="text-center mt-5">Aucun vehicule pour l'instant</p>
				{% else %}
					<div class="my-5 d-flex flex-column justify-content-center align-items-center">
						<div class="container mt-5">
							<div class="row">
								{% for vehicle in vehicles %}
									<div class="col-md-4 mb-4">
										<div class="card mx-3 border shadow h-100">
											<img src="{{ vich_uploader_asset(vehicle, 'imageFile') }}" class="card-img-top img-fluide" alt="Image du vehicule">
											<div class="card-body">
												<h5 class="card-title">{{ vehicle.name }}</h5>
												<p class="card-text">Prix Journalier :
													{{ vehicle.dailyPrice }}
													â‚¬</p>
												<p class="card-text">{{ vehicle.description|striptags|u.truncate(70, '...')|raw }}</p>
												<p>
													<a href="{{path('user.vehicle.show', {'id' : vehicle.id})}}" class="btn btn-primary">Details</a>
												</p>
											</div>
										</div>
									</div>
								{% endfor %}
							</div>
						</div>

						{# display navigation #}
						<div class="mt-2">
							{{ knp_pagination_render(vehicles) }}
						</div>
					</div>
				{% endif %}

			</div>
		</div>
	</main>
{% endblock %}
